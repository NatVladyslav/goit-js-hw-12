{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchPhotos = (searchedQuery, page, perPage) => {\n  const asyncParams = {\n    params: {\n      key: '45468562-3d934deccae668c7d7f46b2f1',\n      q: searchedQuery,\n      page: page,\n      per_page: perPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  };\n  return axios.get('/api/', asyncParams).then(response => response.data);\n};","export function createCard(imgData) {\n    return `\n    <li class=\"card-list-item\">\n        <a class=\"card-list-link\" href=\"${imgData.largeImageURL}\">\n            <img src=\"${imgData.webformatURL}\" alt=\"${imgData.tags}\" class=\"card-list-item-img\" />\n        </a>\n        <ul class=\"card-item-inside-list\">\n          <li class=\"inside-list-item\">\n            <h3>Likes</h3>\n            <p>${imgData.likes}</p>\n          </li>\n          <li class=\"inside-list-item\">\n            <h3>Views</h3>\n            <p>${imgData.views}</p>\n          </li>\n          <li class=\"inside-list-item\">\n            <h3>Comments</h3>\n            <p>${imgData.comments}</p>\n          </li>\n          <li class=\"inside-list-item\">\n            <h3>Downloads</h3>\n            <p>${imgData.downloads}</p>\n          </li>\n        </ul>\n    </li>\n    `;\n}","import { fetchPhotos } from \"./js/pixabay-api\";\nimport { createCard } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nconst searchForm = document.querySelector(\".search-form\");\nconst cardsList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".js-load-more-btn\");\n\nlet page = 1;\nconst perPage = 15;\nlet query = '';\n\nconst gallery = new SimpleLightbox(\".gallery li a\", {\n    captions: true,\n    captionClass: \"style-caption\",\n    captionsData: 'alt',\n    captionDelay: 250,\n    disableRightClick: true,\n});\n\nloadMoreBtn.classList.add('is-hidden');\n\nconst onSearchFormSubmit = async (event) => {\n    event.preventDefault();\n    page = 1;\n    query = searchForm.elements.user_query.value.trim();\n    cardsList.innerHTML = '';\n    loadMoreBtn.classList.add('is-hidden');\n    if (!query) return;\n\n    try {\n        loader.classList.add(\"is-open\");\n        const data = await fetchPhotos(query, page, perPage);\n        if (data.hits.length === 0) {\n            iziToast.info({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topCenter\",\n                title: \"Attention\",\n                color: \"red\",\n                timeout: 4000,\n            });\n            loader.classList.remove(\"is-open\");\n            return;\n        }\n\n        renderGallery(data.hits);\n        loader.classList.remove(\"is-open\");\n\n        if (data.hits.length < perPage) {\n            iziToast.info({\n                message: \"You've reached the end of search results.\",\n                position: \"topCenter\",\n                title: \"Info\",\n                timeout: 4000,\n            });\n        } else {\n            loadMoreBtn.classList.remove('is-hidden');\n        }\n    } catch (err) {\n        console.log(err);\n        loader.classList.remove(\"is-open\");\n    }\n    searchForm.reset();\n};\n\nconst onLoadMoreClick = async () => {\n    page += 1;\n    try {\n        loader.classList.add(\"is-open\");\n        const data = await fetchPhotos(query, page, perPage);\n        renderGallery(data.hits);\n        loader.classList.remove(\"is-open\");\n\n        const { height: cardHeight } = cardsList.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n\n        if (data.hits.length < perPage) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topCenter\",\n                title: \"Info\",\n                timeout: 4000,\n            });\n            loadMoreBtn.classList.add('is-hidden');\n        }\n    } catch (err) {\n        console.log(err);\n        loader.classList.remove(\"is-open\");\n    }\n};\n\nconst renderGallery = (photos) => {\n    const markup = photos.map(createCard).join(\"\");\n    cardsList.insertAdjacentHTML('beforeend', markup);\n    gallery.refresh();\n};\n\nsearchForm.addEventListener(\"submit\", onSearchFormSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMoreClick);"],"names":["axios","fetchPhotos","searchedQuery","page","perPage","asyncParams","response","createCard","imgData","searchForm","cardsList","loader","loadMoreBtn","query","gallery","SimpleLightbox","onSearchFormSubmit","event","data","iziToast","renderGallery","err","onLoadMoreClick","cardHeight","photos","markup"],"mappings":"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"}